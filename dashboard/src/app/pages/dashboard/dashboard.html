<div class="row" ui-tour="demo">
    <div class="col-xs-12">
        <form class="form-vertical">

            <div class="row" style="margin-bottom: 4px;">
                <div class="col-lg-7 col-md-7 col-xs-12">
                    <nav class="navbar navbar-default"
                         tour-step
                         tour-step-belongs-to="demo"
                         tour-step-title="Select experiment type"
                         tour-step-content="Investigate the photo-taxis behavior of Euglena gracilis remotely over the Internet without attending a wet lab. Here you can choose what type of experiment you want to execute. Each mode gives you a different level of interactive control of the stimulus in the experiment."
                         tour-step-order="0"
                         tour-step-placement="bottom"
                         tour-step-use-ui-router="true"
                         tour-step-scroll-offset="100"
                         tour-step-backdrop="true"
                         tour-step-append-to-body="true">
                        <div class="container">

                            <div class="navbar-header">
                                <a class="navbar-brand" href="#" style="text-transform: uppercase">Select experiment <i
                                        class="fa fa-question-circle" ng-click="vm.showDemo()"></i> </a>
                            </div>

                            <ul class="nav navbar-nav">
                                <li style="text-transform: uppercase" ng-class="{'active':vm.experiment.type=='live'}"
                                    tour-step
                                    tour-step-belongs-to="demo"
                                    tour-step-title="Live mode"
                                    tour-step-content="Click on the live mode and your experiment request will be submitted to the server. Once your request is approved (which happens immediately depending on the number of experiments in queue and available microscopes), you will be asked to confirm if you want to proceed. On confirmation, your live experiment will start."
                                    tour-step-order="1"
                                    tour-step-placement="bottom"
                                    tour-step-use-ui-router="true"
                                    tour-step-scroll-offset="100"
                                    tour-step-backdrop="true"
                                    tour-step-append-to-body="true"><a
                                        ng-click="vm.selectMode('live')" style="cursor: pointer">Live</a></li>
                                <li style="text-transform: uppercase" ng-class="{'active':vm.experiment.type=='batch'}"
                                    tour-step
                                    tour-step-belongs-to="demo"
                                    tour-step-title="Batch mode"
                                    tour-step-content="Click on the batch mode and you will be asked to submit a CSV file with predefined steps to execute during the experiment."
                                    tour-step-order="2"
                                    tour-step-placement="bottom"
                                    tour-step-use-ui-router="true"
                                    tour-step-scroll-offset="100"
                                    tour-step-backdrop="true"
                                    tour-step-append-to-body="true">
                                    <a ng-click="vm.selectMode('batch')" style="cursor: pointer">Batch</a></li>
                            </ul>

                        </div><!-- /.container-fluid -->
                    </nav>
                </div>
                <div class="col-lg-5 col-md-5 col-xs-12"
                     tour-step
                     tour-step-belongs-to="demo"
                     tour-step-title="Start"
                     tour-step-content="Press this button when you are ready to start your experiment. It will also validate if you have correctly followed all the steps required for the experiment."
                     tour-step-order="6"
                     tour-step-placement="bottom"
                     tour-step-use-ui-router="true"
                     tour-step-scroll-offset="100"
                     tour-step-backdrop="true"
                     tour-step-append-to-body="true">
                    <button type="submit" class="btn btn-primary experiment-progress" progress-button="vm.startExperiment()"
                            style="line-height: 50px;">Start {{vm.experiment.type}} experiment <span ng-if="vm.selected">on {{vm.selected.name}}</span>
                        <i class="glyphicon glyphicon-play"></i>
                    </button>
                </div>
            </div>


            <div class="row" ng-if="vm.experiment.type=='batch'" style="margin-bottom: 4px;">
                <div class="col-xs-12">
                    <div class="panel bootstrap-panel" style="box-shadow: none">
                        <div class="panel-heading">
                            <h3 class="panel-title">Upload batch file</h3>
                        </div>
                        <div class="panel-body"
                             tour-step
                             tour-step-belongs-to="demo"
                             tour-step-title="Provide a batch file"
                             tour-step-content="Here you need to provide a CSV file in a specific format. It has different columns like time, LED values etc. The time column requires value in milliseconds. Each LED column requires value in the range 0 to 100 representing light intensity at a given time. This intensity will be maintained until the next command or end of the experiment.Each row is executed at the time defined in time column."
                             tour-step-order="4"
                             tour-step-placement="bottom"
                             tour-step-use-ui-router="true"
                             tour-step-scroll-offset="100"
                             tour-step-backdrop="true"
                             tour-step-append-to-body="true">
                            <div class="row">
                                <div class="col-xs-12">
                                    <a class="btn btn-default" href="https://goo.gl/z2Qjps" target="_blank"
                                         style="height:100px;width:100px;cursor: pointer;text-align: center;margin-right: 20px"><img
                                            src="assets/img/app/gsheet.png" style="max-width: 70px;"><br><i
                                            class="fa fa-download"></i> Template
                                    </a>

                                    <div class="btn btn-default" ngf-select="vm.upload($file)" ng-model="file"
                                         name="file"
                                         ngf-pattern="'text/csv'"
                                         ngf-accept="'.csv'"
                                         ngf-max-size="2MB"
                                         style="height:100px;width:100px;cursor: pointer;text-align: center"><img
                                            src="assets/img/app/csv.png" style="max-width: 70px"><br><i
                                            class="fa fa-upload"></i> Upload
                                    </div>
                                </div>


                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="row" style="margin-bottom: 4px;">
                <div class="col-xs-12">
                    <div class="panel bootstrap-panel" style="box-shadow: none">
                        <div class="panel-heading">
                            <h3 class="panel-title">Select a microscope
                                <small>(optional)</small>
                            </h3>
                        </div>
                        <div class="panel-body"
                             tour-step
                             tour-step-belongs-to="demo"
                             tour-step-title="Choose your microscope"
                             tour-step-content="This section shows different microscopes available. Each microscope is equipped with a micro-fluidic chamber filled with 'live' Euglena gracilis and surrounded by four LEDs on each side. You can see the live view of moving euglena in Live mode (screenshot of the same is shown here)."
                             tour-step-order="5"
                             tour-step-placement="bottom"
                             tour-step-use-ui-router="true"
                             tour-step-scroll-offset="100"
                             tour-step-backdrop="true"
                             tour-step-append-to-body="true">
                            <div class="row">
                                <div class="col-xlg-2 col-lg-3 col-md-4 col-sm-6 col-xs-12"
                                     ng-repeat="microscope in vm.activeMicroscopes">

                                    <div class="panel microscope bootstrap-panel enabled"
                                         ng-click="vm.toggleSelection(microscope)"
                                         ng-class="{'selected':vm.selected && vm.selected.name==microscope.name}">
                                        <div class="panel-heading clearfix" style="height: 64px;">
                                            <!--<button class="btn btn-primary pull-right" ng-click="vm.join(microscope)">Start</button>-->

                                            <h3 class="panel-title" style="margin-bottom: 8px;">{{microscope.name}}<span
                                                    class="pull-right" ng-if="microscope.isConnected">~{{microscope.queueTime/1000|number:0}} sec</span>
                                            </h3>
                                            <!--<h4 style="font-size: 16px;margin-bottom: 6px;">Time left: <span>{{microscope.timePending/1000|number:0}} sec</span>-->
                                            </h4>
                                            <h4 style="font-size: 16px;margin-bottom: 8px;">Quality:
                                                <uib-rating ng-model="microscope.quality" max="vm.max"
                                                            read-only="true"
                                                            aria-labelledby="default-rating"></uib-rating>
                                            </h4>

                                        </div>
                                        <div class="panel-body">
                                            <div class="microscope-wrapper">
                                                <div class="microscope-main-info">
                                                    <div style="color: #fff;font-weight: 600;font-size: 24px;float: right;position: relative;right: 12px;top: 12px;margin-bottom: -24px;    text-shadow: black;    text-shadow: 1px 1px 0 rgba(0, 0, 0, 0.6);">
                                                        {{microscope.magnification}}X
                                                    </div>
                                                    <div style="position:absolute;top:60%;background-color:rgba(0,0,0,0.4);width:100%;padding:4px 0px;text-align: center;font-weight: 600">
                                                        <span style="text-transform: uppercase;color:white;text-shadow: black;    text-shadow: 1px 1px 0 rgba(0, 0, 0, 0.6);">{{microscope.status}}</span>
                                                    </div>
                                                    <img ng-src="{{microscope.address}}"
                                                         err-src="/assets/img/bpu-disabled.jpg"
                                                         style="width:100%">
                                                </div>
                                                <!--<div class="microscope-footer">-->
                                                <!--<div class="progress" ng-repeat="stat in microscope.statistics | orderBy:'name' ">-->
                                                <!--<div class="progress-bar" role="progressbar" aria-valuenow="{{stat.value}}"-->
                                                <!--aria-valuemin="0"-->
                                                <!--aria-valuemax="{{stat.max}}" style="width: {{stat.percent|number}}%"-->
                                                <!--ng-class="stat.class">-->
                                                <!--<span>{{stat.name | uppercase}}</span>-->
                                                <!--</div>-->
                                                <!--</div>-->
                                                <!--</div>-->
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!--<div class="col-xlg-3 col-lg-4 col-md-4 col-sm-3 col-xs-12 pull-right">-->
                                <!--<div class="panel">-->
                                <!--<div class="panel-heading">-->
                                <!--<h3 class="panel-title" style="margin-bottom: 8px;">Users online</h3>-->
                                <!--</div>-->
                                <!--<div class="panel-body">-->
                                <!--<ul class="list-unstyled" ng-repeat="user in vm.users">-->
                                <!--<li><i class="fa fa-male"></i> {{user.username}}</li>-->
                                <!--</ul>-->
                                <!--</div>-->
                                <!--</div>-->

                                <!--</div>-->
                            </div>
                        </div>
                    </div>
                </div>
            </div>


        </form>
    </div>
</div>